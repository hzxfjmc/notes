### http简介


### http是什么

http是超文本传输协议（HyperText Transfer Protocol）

* HTTP是一个用在计算机世界里的协议，它确认了一种计算机之间的交流通信规范，以及相关的各种控制和错误的处理方式

* HTTP专门用来在两点之间的传输数据，不能用于广播、寻址和路由

* HTTP传输的是一种文字、图片、音频、视频等超文本数据

* HTTP是构建互联网的重要基础技术，它没有实体，依赖许多其他技术来实现，但同时许多技术也都依赖于它

### http的特点

* HTTP是灵活可扩展的，可以任意添加头字段实现任意功能

* HTTP是可靠传输协议，基于TCP/IP协议尽量保证数据的送达

* HTTP是应用层协议，比FTP、SSH等更通用，功能更多，能够传输任意数据

* HTTP使用了请求-应答模式，客户端主动发起请求，服务器被动回复请求

* HTTP本质上是无状态的，每个请求都是互相独立，毫无关联的，协议不要求客户端或服务端记录请求相关信息

### http优缺点

* HTTP最大的优点就是简单、灵活和易于扩展

* HTTP拥有成熟的软硬件，应用非常广泛，是互联网的基础建设

* HTTP是无状态的，可以轻松实现集群化，扩展性能，但有时也需要用Cookie技术来实现有状态

* HTTP是不安全的，无法验证通信双方的身份，也不能判断报文是否被窜改

* HTTP的性能不算差，但不完全适应现有的互联网，还有很大的提升空间


### 与http相关的概念

* 互联网上绝大部分资源都使用HTTP协议传输

* 浏览器是HTTP协议里的请求方，即User Agent

* 服务器是HTTP协议里面的应答方，常用的有Apache 和Ngnix

* CDN位于浏览器和服务器之间，主要起到缓存加速的作用

* 爬虫是另一类User Agent，是自动访问网络的程序


### 与http相关的协议

* TCP/IP是网络世界最常见的协议，HTTP通常运行在TCP/IP提供可靠的传输基础上

* DNS域名是IP地址的等价替代，需要域名解析实现到IP地址的映射

* URI是用来标记互联网上资源的一个名字，由协议名+主机名+路径构成，俗称URL

* HTTPS相当于HTTP+SSL/TLS+TCP/IP,为HTTP套了一个安全的外壳

* 代理是HTTP传输过程中的中转站，可以实现缓存加速、负载均衡等功能


### http分层概念

四层概念分为从下往上：链接层（物理层）=> 国际层（网络互连层）=> 传输层 => 应用层

七层概念：

* 第一层：物理层，网络的物理形式，例如电缆、光纤、网卡、集线器等等；

* 第二层：数据链路层，它基本相当于 TCP/IP 的链接层；

* 第三层：网络层，相当于 TCP/IP 里的网际层；

* 第四层：传输层，相当于 TCP/IP 里的传输层；

* 第五层：会话层，维护网络中的连接状态，即保持会话和同步；

* 第六层：表示层，把数据转换为合适、可理解的语法和语义；

* 第七层：应用层，面向具体的应用传输数据。

总结http网络分层模型有以下内容：

* TCP/IP分为四层，核心是二层的IP和三层的TCP，HTTP在第四层

* OSI分为七层，基本对应TCP/IP，TCP在第四层，HTTP在第七层

* OSI可以映射到TCP/IP，但这期间一、五、六层消失了

* 日常交流的时候我们通常使用OSI模型，用四层、七层等术语

* HTTP利用TCP/IP协议栈逐层打包再拆包，实现了数据传输，但下面的细节不可见

辨别四层和七层的方法：凡是由操作系统负责处理的就是四层或四层以下，否则，凡是需要应用程序负责处理的就是七层


#### <font color=#00ffff size=3>http/0.9</font>

http0.9版本，结构比较简单，为了便于服务器和客户端处理，它采用的纯文本格式，因为最初的设想是只读模式，所以只允许通过GET方法从服务器上获取HTML文档，并且在响应请求后立即关闭连接，功能非常的有限。

HTTP/0.9虽然简单，但它作为一个原型，充分的验证了Web服务的可行性，而简单也正是他的优点，蕴含了进化和扩展的可能性


### <font color=#00ffff size=3>http/1.0</font>

经过一系列的草案，HTTP1.0在1996年正式发布，它增强了很多0.9版本，形式上和我们现在的http差别不大。

* 增加了HEAD、POSt方法

* 增加了响应状态码、标记可能的错误原因

* 引入了协议版本号的概念

* 引入了HTTP Header(头部)的概念，让HTTP处理请求和响应更加灵活

* 传输的数据不再仅限于文本

但 HTTP/1.0 并不是一个“标准”，只是记录已有实践和模式的一份参考文档，不具有实际的约束力，相当于一个“备忘录”。

所以 HTTP/1.0 的发布对于当时正在蓬勃发展的互联网来说并没有太大的实际意义，各方势力仍然按照自己的意图继续在市场上奋力拼杀。

### <font color=#00ffff size=3>http/1.1</font>

HTTP1.1是对HTTP1.0的小幅度修正，但是一个重要的区别是：它是一个正式的标准。而不是一份可有可无的参考文档，意味着今后的所有浏览器、服务器、网关、代理等等，只要用到了HTTP协议，就必须严格遵守这个标准，相当于是互联网的一个立法（1999年发布HTTP/1.1）

HTTP1.1有以下重要改动

* 增加了PUT、DELETE等新方法

* 增加了缓存管理和控制

* 明确了连接管理、允许持久连接

* 允许响应数据分块（chunked），利于传输大文件

* 强制要求host头。让互联网主机托管成为可能

不过HTTP/1.1太过于庞大和复杂。所以在2014年又做了一次修订，原来的一个大文档被拆分成了六份较小的文档，编号为7230-7235，优化了一些细节，单此外没有任何实质性的改动。


### <font color=#00ffff size=3>http/2.0</font>

HTTP/2.0的制定充分考虑了当前的互联网的现状：宽带、移动、不安全，在高度兼容HTTP/1.1的同时在性能改善方面做了很大的努力，主要特点有:

* 二进制协议，不再是纯文本

* 可发起多个请求，废弃了1.1里的管道

* 使用专用算法压缩头部，减少数据传输量

* 允许服务器主动向客户端推送数据

* 增强了安全性，事实上要求加密通信

虽然HTTP/2到今天已经4岁了，也衍生出了gRPC等新协议，但由于HTTP/1.1实在太过于经典和强势，目前它的普及率还比较低，大多数网站使用的还是20年前的HTTP/1.1